class StarRating extends HTMLElement{static #a;static #b="star-rating";static{this.#a=document.createElement("template"),this.#a.innerHTML='<style>*{box-sizing:border-box;padding:0;margin:0}div{display:inline-block}:host{--star-gap:.15em;display:inline-block;height:2em;padding:.15em .25em}#cntr{--clip-path:none;outline:none;position:relative;display:flex;flex-wrap:nowrap;height:100%;gap:var(--star-gap);overflow-x:auto;overflow-y:hidden;width:auto}:host(:focus){outline:5px auto -webkit-focus-ring-color;outline:5px auto Highlight}[part="star"]{--star-fill-color:radial-gradient(yellow,gold 40%);--star-empty-color:#999;filter:drop-shadow(1px 1px 2px black);height:100%}:host([changeable]) [part="star"]:hover{transform:scale(.9);cursor:pointer}[part="star"]>span{display:inline-block;height:100%;aspect-ratio:1;background:var(--star-fill-color);clip-path:var(--clip-path);position:relative;--fill:100%}[part="star"]>span::after{display:inline-block;z-index:1;content:\'\';position:absolute;left:var(--fill);height:100%;width:calc(100% - var(--fill));background:var(--star-empty-color)}#ip{position:absolute;bottom:0;left:25%;border:none;width:1px;height:1px;opacity:0}</style><div id="cntr"></div>',customElements.define(this.#b,this)}static  *#c(h=0,b=null,e=1){b??=Number.MAX_SAFE_INTEGER-e;let m=Math.sign(e);if(Math.sign(b-h)!==m)throw new RangeError(`Infinite steps: ${h} -> ${b} is impossible with ${e} as increment`);let f=h;for(;f!==b&&Math.sign(b-f)===m;)yield f,f+=e}static  #d(v,{int:w=!1,mod:i=null,min:j=null,max:n=null}={}){let a=Number(v);if(!Number.isFinite(a))return null;if(w&&(a=parseInt(a)),null!==i){let x=j??0;for(;a<x;)a+=i;a%=i}return null!==j&&a<j||null!==n&&a>n?null:a}#e;#f;#g={points:5,depth:50,rotate:0,precision:2,value:0,max:5};constructor(){for(let a of(super(),this.#e={root:this.attachShadow({mode:"closed"}),get starSpans(){return this.cntr.querySelectorAll("div > span")},get ip(){return this.cntr.querySelector("#ip")}},this.#e.root.appendChild(StarRating.#a.content.cloneNode(!0)),this.#e.cntr=this.#e.root.querySelector("#cntr"),this.#f=this.attachInternals(),Object.keys(ElementInternals.prototype).filter(a=>a.startsWith("aria"))))Object.defineProperty(this,a,{value:this.#f[a]});this.#h(),this.#i(),this.#j()}get points(){return this.#g.points}set points(a){this.setAttribute("points",a)}get depth(){return this.#g.depth}set depth(a){this.setAttribute("depth",a)}get rotate(){return this.#g.rotate}set rotate(a){this.setAttribute("rotate",a)}get precision(){return this.#g.precision}set precision(a){this.setAttribute("precision",a)}get max(){return this.#g.max}set max(a){this.setAttribute("max",a)}get value(){return this.#g.value}set value(a){this.setAttribute("value",a)} #i(y=5){this.#e.cntr.innerHTML=`${[...StarRating.#c(0,y)].map(()=>'<div part="star"><span></span></div>').join("")}<input id="ip" type="checkbox" />`}static  #k(k){k.offset=50-(Math.max(...k)+Math.min(...k))/2} #h(){let z=(100-this.#g.depth)/2,o=this.#g.precision,c=[],g=[],p=[];for(let[A,q]of Object.entries([...StarRating.#c(this.#g.rotate+270,630+this.#g.rotate,180/this.#g.points)].map(b=>{let a=b%360*Math.PI/180;return{sin:Math.sin(a),cos:Math.cos(a)}}))){let r=A%2?z:50;c.push(r*q.cos),g.push(r*q.sin)}for(let s of(StarRating.#k(c),StarRating.#k(g),StarRating.#c(0,c.length)))p.push(`${Number((c[s]+c.offset).toFixed(o))}% ${Number((g[s]+g.offset).toFixed(o))}%`);this.#e.cntr.style.setProperty("--clip-path",`polygon(${p.join(",")})`)} #j(){let{max:B,value:l}=this.#g;l=Number(l.toFixed(2));let C=[...this.#e.starSpans];for(let t of StarRating.#c(0,B)){let d=l-t;d>1?d=1:d<0&&(d=0),C[t].style.setProperty("--fill",`${100*d}%`)}} #l(D){if(D)for(let[G,E]of Object.entries(this.#e.starSpans))E.parentElement.onclick=a=>{a.preventDefault(),a.stopPropagation(),this.value=parseInt(G)+1};else for(let F of this.#e.starSpans)F.parentElement.onclick=null}connectedCallback(){this.#m()}adoptedCallback(){this.#m()}static get observedAttributes(){return["points","depth","rotate","precision","max","value","changeable","required"]}attributeChangedCallback(b,c,a){if(c!==a)switch(b){case"points":this.#g.points=StarRating.#d(a,{int:!0,min:2})??5,this.#h();break;case"depth":this.#g.depth=StarRating.#d(a,{min:0,max:99})??50,this.#h();break;case"rotate":this.#g.rotate=StarRating.#d(a,{mod:360,min:0,max:360})??0,this.#h();break;case"precision":this.#g.precision=StarRating.#d(a,{int:!0,min:0,max:7})??7,this.#h();break;case"max":this.#g.max=StarRating.#d(a,{int:!0,min:1,max:10})??5,this.#i(this.#g.max),this.#j(),this.#m(),this.#l(this.hasAttribute("changeable"));break;case"value":this.#g.value=StarRating.#d(a,{min:0,max:this.max})??0,this.#j(),this.#m(),this.dispatchEvent(new Event("change",{bubbles:!0}));break;case"changeable":this.#l(null!==a);break;case"required":this.#m()}} #m(){let u=this.value;this.#f.setFormValue(u),this.hasAttribute("required")&&0===u?this.#f.setValidity({valueMissing:!0},"A rating is required",this.#e.ip):this.#f.setValidity({})}static get formAssociated(){return!0}get shadowRoot(){return this.#f.shadowRoot}get form(){return this.#f.form}get states(){return this.#f.states}get willValidate(){return this.#f.willValidate}get validity(){return this.#f.validity}get validationMessage(){return this.#f.validationMessage}get labels(){return this.#f.labels}setFormValue(...a){return this.#f.setFormValue(...a)}setValidity(...a){return this.#f.setValidity(...a)}checkValidity(...a){return this.#f.checkValidity(...a)}reportValidity(...a){return this.#f.reportValidity(...a)}get name(){return this.getAttribute("name")}get type(){return this.localName}}