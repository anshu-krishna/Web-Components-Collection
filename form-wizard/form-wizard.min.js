export function combineFormData(...b){let a=new FormData;for(let c of b.map(a=>[...new FormData(a).entries()]).flat(1))a.append(...c);return a}class FormWizard extends HTMLElement{static #a;static #b="form-wizard";static{this.#a=document.createElement("template"),this.#a.innerHTML='<style>*{box-sizing:border-box}:host{display:none;z-index:100;position:fixed;top:0;left:0;width:100vw;height:100vh;background:0 0}:host([open]){display:inline-block}#cntr{padding:2em;height:100%;display:grid;grid-template-rows:min-content 1fr max-content;gap:.5em;background:rgba(0,0,0,.5)}:host([single-form]) #cntr{grid-template-rows:1fr max-content}#slotc{overflow-y:hidden;display:grid;justify-content:center;align-items:center;background:0 0}#fslot::slotted(:not(form)),#fslot::slotted(:not(form.active)){display:none!important}#fslot::slotted(form){max-height:100%;overflow-y:auto;background:#ededed;color:#000;padding:.5em .75em}#actions{display:flex;justify-content:end;gap:.5em}#actions>button{cursor:pointer;padding:.75em 1.5em;border:none;font-family:\'Lucida Sans\',\'Lucida Sans Regular\',\'Lucida Grande\',\'Lucida Sans Unicode\',Geneva,Verdana,sans-serif;background:#121212;color:wheat;border-radius:.5em}#actions>button:hover{filter:brightness(1.5)}#actions>button:disabled{cursor:not-allowed;filter:brightness(.25)}#actions>button:active{filter:brightness(.7)}#states{display:flex;flex-wrap:wrap;gap:.5em;align-items:center;justify-content:center}:host([single-form]) #states{display:none}#states>div:last-child{display:none}#states>div{display:inline-block;height:3px;width:1em;background:grey;border-radius:3px}#states>span{display:grid;font-family:Arial,Helvetica,sans-serif;width:1em;height:1em;border-radius:.5em;justify-content:center;align-items:center;background:#eceff1;border:.1em solid #263238;box-shadow:-1px 1px 4px #000}#states>span[part="dot dot-ok"]{background:#00695c}#states>span.active{border-width: 0.2em !important}</style><div part="overlay" id="cntr"><div exportparts="dot, dot-ok, dot-error" id="states"></div><div part="form-container" id="slotc"><slot id="fslot"></slot></div><div part="button-container" id="actions"><button part="button">Back</button><button part="button">Next</button><button part="button">Cancel</button></div></div>',customElements.define(this.#b,this),console.log("WebCompoent Loaded: "+this.#b+";")}static  #c(d,e,f){d.textContent=e,f?d.setAttribute("disabled","disabled"):d.removeAttribute("disabled")}#d;#e;#f=[];#g=[];#h=0;set #i(a){let c=this.#f.length;for(let g of(a<0&&(a+=c),a>=c&&(a%=c),this.#g))g.classList.remove("active");for(let h of this.#f)h.classList.remove("active");let b=this.#f[a];FormWizard.#c(this.#e[0],b.dataset.backText??"Back",0===a||b.dataset.backDisabled),FormWizard.#c(this.#e[1],b.dataset.nextText??(a+1===c?"Finish":"Next"),b.dataset.nextDisabled),FormWizard.#c(this.#e[2],b.dataset.cancelText??"Cancel",b.dataset.cancelDisabled),b.classList.add("active"),this.#g[a].classList.add("active"),this.#h=a,b.querySelector("input, textarea")?.focus()}get #i(){return this.#h}constructor(){super(),this.#d=this.attachShadow({mode:"closed"}),this.#d.appendChild(FormWizard.#a.content.cloneNode(!0)),this.#e=[...this.#d.querySelectorAll("#actions > button")],this.#d.querySelector("slot").addEventListener("slotchange",({target:c})=>{this.#f=[];let b=this.#d.querySelector("#states");for(let a of(b.innerHTML="",c.assignedNodes()))3===a.nodeType?a.nodeValue="":a instanceof HTMLFormElement&&(this.#f.push(a),a.addEventListener("submit",a=>(a.preventDefault(),a.stopPropagation(),this.#e[1].click(),!1)),b.appendChild(document.createElement("span")).setAttribute("part","dot"),b.appendChild(document.createElement("div")).setAttribute("part","dot-spacer"));this.#g=[...this.#d.querySelectorAll("#states > span")],this.dispatchEvent(new CustomEvent("ready"))}),this.#e[0].addEventListener("click",()=>this.#i--),this.#e[1].addEventListener("click",()=>{let a=this.#f[this.#h],b=this.#g[this.#h];if(a.checkValidity())b.setAttribute("part","dot dot-ok");else if(b.setAttribute("part","dot dot-error"),!Boolean(a.dataset.skippable)){a.reportValidity();return}if(this.#h+1===this.#f.length){this.removeAttribute("open"),this.hasAttribute("combined-formdata")?this.dispatchEvent(new CustomEvent("submit",{detail:combineFormData(...this.#f.filter((b,a)=>"dot dot-ok"===this.#g[a].getAttribute("part")))})):this.dispatchEvent(new CustomEvent("submit",{detail:this.#f.map((a,b)=>({form:a,valid:"dot dot-ok"===this.#g[b].getAttribute("part")}))}));return}this.#i++}),this.#e[2].addEventListener("click",()=>this.removeAttribute("open"))}show(){if(0===this.#f.length){console.log("No forms found in",this);return}1===this.#f.length&&this.setAttribute("single-form",""),this.#i=0,this.setAttribute("open","")}hide(){this.removeAttribute("open")}}