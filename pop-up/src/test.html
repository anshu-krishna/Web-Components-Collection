<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Popup Test</title>
	<style>
/**************
Component parts:
	title
	content
	close
	close_svg
**************/
		pop-up {
			--z-index: 500;

			--backpanel-backgound: rgba(0, 0, 0, 0.9);
			--backpanel-padding: 0.75em 1.5em;
			--content-gap-around: 1em;

			--delay: 0.1s;
		}
		pop-up::part(title) {
			color: white;
		}
	</style>
</head>
<body>
	<button>Open pop-up 1</button>
	<button>Open pop-up 2</button>
	<button>Open pop-up 3</button>
<!--
Component attributes:
	open
	direction="right"
	no-panel-close
	close-disabled
-->
	<pop-up open>
		<span slot="title">This is title</span>
		<div>
			This pop-up is open by default.
		</div>
	</pop-up>
	<script type="module" src="./pop-up.js"></script>
	<pop-up direction="right" no-panel-close>
		<ul>
			<li>This has no title</li>
			<li>Slide direction is right</li>
			<li>Close by clicking back-panel is disabled</li>
		</ul>
	</pop-up>

	<pop-up close-disabled>
		<ul>
			<li>Close is disabled.</li>
			<li>This can only be closed by invoking the component's close function.</li>
			<li>async beforeOpen is added</li>
			<li>normal beforeClose is added</li>
		</ul>
		<button>Click this button to close</button>
	</pop-up>
	<script type="module">
		const popups = Array.from(document.querySelectorAll('pop-up'));
		const buttons = Array.from(document.querySelectorAll('button'));
		for(let i in popups) {
			buttons[i].onclick = _ => popups[i].open();
		}
		buttons[3].onclick = _ => popups[2].close();
		
		popups[2].beforeClose = () => {
			return confirm('Want to close popup?');
		};
		popups[2].beforeOpen = async() => {
			const allow = confirm('Want to open popup?\n(Open is delayed by 1s)');
			await new Promise(resolve => { setTimeout(resolve, 1000); });
			return allow;
		};
	</script>
</body>
</html>